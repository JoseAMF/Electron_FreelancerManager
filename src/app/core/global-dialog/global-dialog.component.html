<!-- Client Dialog -->
<p-dialog 
  [header]="dialogState.config.title" 
  [(visible)]="dialogState.visible"
  [modal]="dialogState.config.modal"
  [style]="{ width: dialogState.config.width }"
  [closable]="dialogState.config.closable"
  [dismissableMask]="dialogState.config.dismissableMask"
  *ngIf="dialogState.type === 'client'">
  
  <form [formGroup]="clientForm" class="dialog-content">
    <!-- Name Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-user"></i>
        </p-inputgroup-addon>
        <p-floatlabel variant="in">
          <input 
            pInputText 
            id="name" 
            formControlName="name"
            [class.ng-invalid]="isFieldInvalid(clientForm, 'name')"
          />
          <label for="name">Name *</label>
        </p-floatlabel>
      </p-inputgroup>
      <small class="error-message" *ngIf="isFieldInvalid(clientForm, 'name')">
        {{ getFieldError(clientForm, 'name') }}
      </small>
    </div>

    <!-- Email Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-envelope"></i>
        </p-inputgroup-addon>
        <p-floatlabel variant="in">
          <input 
            pInputText 
            id="email" 
            formControlName="email"
            [class.ng-invalid]="isFieldInvalid(clientForm, 'email')"
          />
          <label for="email">Email *</label>
        </p-floatlabel>
      </p-inputgroup>
      <small class="error-message" *ngIf="isFieldInvalid(clientForm, 'email')">
        {{ getFieldError(clientForm, 'email') }}
      </small>
    </div>

    <!-- Phone and Discord Fields -->
    <div class="field-row half-width">
      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-phone"></i>
          </p-inputgroup-addon>
          <p-floatlabel variant="in">
            <input 
              pInputText 
              id="phone" 
              formControlName="phone"
              [class.ng-invalid]="isFieldInvalid(clientForm, 'phone')"
            />
            <label for="phone">Phone</label>
          </p-floatlabel>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(clientForm, 'phone')">
          {{ getFieldError(clientForm, 'phone') }}
        </small>
      </div>

      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-discord"></i>
          </p-inputgroup-addon>
          <p-floatlabel variant="in">
            <input 
              pInputText 
              id="discord" 
              formControlName="discord"
            />
            <label for="discord">Discord</label>
          </p-floatlabel>
        </p-inputgroup>
      </div>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <button pButton type="button" severity="secondary" label="Cancel" icon="pi pi-times" (click)="cancelDialog()"></button>
    <button 
      pButton 
      type="button" 
      severity="primary" 
      label="Save" 
      icon="pi pi-check" 
      [disabled]="clientForm.invalid"
      (click)="saveClient($event)">
    </button>
  </ng-template>
</p-dialog>

<!-- Job Dialog -->
<p-dialog 
  [header]="dialogState.config.title" 
  [(visible)]="dialogState.visible"
  [modal]="dialogState.config.modal"
  [style]="{ width: dialogState.config.width }"
  [closable]="dialogState.config.closable"
  [dismissableMask]="dialogState.config.dismissableMask"
  *ngIf="dialogState.type === 'job'">
  
  <form [formGroup]="jobForm" class="dialog-content">
    <!-- Title Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-briefcase"></i>
        </p-inputgroup-addon>
        <p-iftalabel>
          <input 
            pInputText 
            inputId="title" 
            formControlName="title"
            [class.ng-invalid]="isFieldInvalid(jobForm, 'title')"
          />
          <label for="title">Job Title *</label>
        </p-iftalabel>
      </p-inputgroup>
      <small class="error-message" *ngIf="isFieldInvalid(jobForm, 'title')">
        {{ getFieldError(jobForm, 'title') }}
      </small>
    </div>

    <!-- Job Type Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-briefcase"></i>
        </p-inputgroup-addon>
        <div style="flex: 1; width: 100%;">
          <p-iftalabel style="width: 100%; display: block;">
            <p-dropdown 
              inputId="job_type"
              formControlName="job_type"
              [options]="jobTypes"
              optionLabel="name"
              placeholder="Select a job type..."
              [style]="{ width: '100%' }"
              [showClear]="true">
              <ng-template let-jobType pTemplate="item">
                <div class="job-type-option">
                  <div 
                    class="job-type-color" 
                    [style.background-color]="jobType.color_hex">
                  </div>
                  <div class="job-type-info">
                    <span class="job-type-name">{{ jobType.name }}</span>
                    <span class="job-type-separator">•</span>
                    <span class="job-type-details">{{ jobType.base_price | currency }} • {{ jobType.base_hours }}h</span>
                  </div>
                </div>
              </ng-template>
              <ng-template let-jobType pTemplate="selectedItem">
                <div class="job-type-selected" *ngIf="jobType">
                  <div 
                    class="job-type-color" 
                    [style.background-color]="jobType.color_hex">
                  </div>
                  <span>{{ jobType.name }}</span>
                </div>
              </ng-template>
            </p-dropdown>
            <label for="job_type">Job Type</label>
          </p-iftalabel>
        </div>
      </p-inputgroup>
    </div>

    <!-- Client and Status Fields -->
    <div class="field-row half-width">
      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-user"></i>
          </p-inputgroup-addon>
          <div style="flex: 1; width: 100%;">
            <p-iftalabel style="width: 100%; display: block;">
              <p-autocomplete 
                inputId="client"
                formControlName="client"
                [suggestions]="filteredClients"
                (completeMethod)="searchClients($event)"
                field="name"
                placeholder="Search clients..."
                [class.ng-invalid]="isFieldInvalid(jobForm, 'client')"
                [style]="{ width: '100%' }">
                <ng-template let-client pTemplate="item">
                  <div class="client-option">
                    <div class="client-name">{{ client.name }}</div>
                    <div class="client-email" *ngIf="client.email">{{ client.email }}</div>
                  </div>
                </ng-template>
              </p-autocomplete>
              <label for="client">Client *</label>
            </p-iftalabel>
          </div>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(jobForm, 'client')">
          {{ getFieldError(jobForm, 'client') }}
        </small>
      </div>

      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-flag"></i>
          </p-inputgroup-addon>
          <p-iftalabel>
            <p-dropdown 
              inputId="status"
              formControlName="status"
              [options]="statusOptions"
              optionLabel="label"
              optionValue="value"
              [class.ng-invalid]="isFieldInvalid(jobForm, 'status')"
              [style]="{ width: '100%' }">
            </p-dropdown>
            <label for="status">Status *</label>
          </p-iftalabel>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(jobForm, 'status')">
          {{ getFieldError(jobForm, 'status') }}
        </small>
      </div>
    </div>

    <!-- Price and Due Date Fields -->
    <div class="field-row half-width">
      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-dollar"></i>
          </p-inputgroup-addon>
          <p-iftalabel>
            <p-inputnumber 
              inputId="price"
              formControlName="price"
              mode="currency" 
              currency="USD" 
              locale="en-US"
              [class.ng-invalid]="isFieldInvalid(jobForm, 'price')"
              [style]="{ width: '100%' }">
            </p-inputnumber>
            <label for="price">Price *</label>
          </p-iftalabel>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(jobForm, 'price')">
          {{ getFieldError(jobForm, 'price') }}
        </small>
      </div>

      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-calendar"></i>
          </p-inputgroup-addon>
          <p-iftalabel style="width: 100%; display: block;">
            <p-datepicker 
              inputId="due_date"
              formControlName="due_date"
              dateFormat="mm/dd/yy"
              [class.ng-invalid]="isFieldInvalid(jobForm, 'due_date')"
              [style]="{ width: '100%' }">
            </p-datepicker>
            <label for="due_date">Due Date</label>
          </p-iftalabel>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(jobForm, 'due_date')">
          {{ getFieldError(jobForm, 'due_date') }}
        </small>
      </div>
    </div>

    <!-- Description Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-file-edit"></i>
        </p-inputgroup-addon>
        <p-iftalabel>
          <textarea 
            pInputTextarea
            inputId="description" 
            formControlName="description"
            rows="4"
            [style]="{ width: '100%' }">
          </textarea>
          <label for="description">Description</label>
        </p-iftalabel>
      </p-inputgroup>
    </div>

    <!-- File Upload Section -->
    <div class="field-row full-width">
      <app-file-uploader
        [readonly]="false"
        [multiple]="true"
        [initialFiles]="currentJobAttachments"
        (filesChanged)="onFilesChanged($event)">
      </app-file-uploader>
    </div>

    <!-- Payment Management Section -->
    <div class="field-row full-width">
      <p-accordion class="payment-accordion">
        <p-accordionTab [selected]="false">
          <ng-template pTemplate="header">
            <div class="payment-header">
              <span class="header-title">
                <i class="pi pi-credit-card mr-2"></i>
                &nbsp; Payments
              </span>
              <p-badge 
                [value]="currentJobPayments.length || 0" 
                severity="info" 
                *ngIf="currentJobPayments.length"
                class="ml-2">
              </p-badge>
            </div>
          </ng-template>

          <div class="payment-content">
            <!-- Add Payment Form -->
            <div class="add-payment-form" *ngIf="showAddPaymentForm">
              <form [formGroup]="paymentForm" class="payment-form">
                <div class="payment-fields">
                  <div class="field-wrapper">
                    <p-floatlabel>
                      <p-inputnumber
                        inputId="payment-amount"
                        formControlName="amount"
                        mode="currency"
                        currency="USD"
                        locale="en-US"
                        [class.ng-invalid]="isFieldInvalid(paymentForm, 'amount')"
                        [style]="{ width: '100%' }">
                      </p-inputnumber>
                      <label for="payment-amount">Amount *</label>
                    </p-floatlabel>
                    <small class="error-message" *ngIf="isFieldInvalid(paymentForm, 'amount')">
                      {{ getFieldError(paymentForm, 'amount') }}
                    </small>
                  </div>

                  <div class="field-wrapper">
                    <p-floatlabel>
                      <p-datepicker 
                        inputId="payment-date" 
                        formControlName="payment_date"
                        [showIcon]="true"
                        dateFormat="dd/mm/yy"
                        [class.ng-invalid]="isFieldInvalid(paymentForm, 'payment_date')"
                      />
                      <label for="payment-date">Payment Date *</label>
                    </p-floatlabel>
                    <small class="error-message" *ngIf="isFieldInvalid(paymentForm, 'payment_date')">
                      {{ getFieldError(paymentForm, 'payment_date') }}
                    </small>
                  </div>
                </div>

                <div class="field-wrapper full-width">
                  <p-floatlabel>
                    <textarea 
                      pInputTextarea
                      inputId="payment-description" 
                      formControlName="description"
                      rows="2"
                      [style]="{ width: '100%' }">
                    </textarea>
                    <label for="payment-description">Description</label>
                  </p-floatlabel>
                </div>

                <!-- Payment Attachments -->
                <div class="field-wrapper full-width">
                  <label class="field-label">Payment Receipts & Documents</label>
                  <app-file-uploader
                    [readonly]="false"
                    [multiple]="true"
                    [initialFiles]="currentPaymentAttachments"
                    (filesChanged)="onPaymentFilesChanged($event)">
                  </app-file-uploader>
                </div>

                <div class="payment-form-actions">
                  <button 
                    pButton 
                    type="button" 
                    label="Cancel" 
                    severity="secondary"
                    size="small"
                    (click)="cancelAddPayment()">
                  </button>
                  <button 
                    pButton 
                    type="button" 
                    label="Add Payment" 
                    severity="primary"
                    size="small"
                    [disabled]="paymentForm.invalid"
                    (click)="addPayment()">
                  </button>
                </div>
              </form>
            </div>

            <!-- Add Payment Button -->
            <div class="add-payment-button" *ngIf="!showAddPaymentForm">
              <button 
                pButton 
                type="button" 
                label="Add Payment" 
                icon="pi pi-plus"
                severity="primary"
                size="small"
                [outlined]="true"
                (click)="toggleAddPaymentForm()">
              </button>
            </div>

            <!-- Payments List -->
            <div class="payments-list" *ngIf="currentJobPayments?.length">
              <div class="payment-item" *ngFor="let payment of currentJobPayments; let i = index">
                <div class="payment-header">
                  <div class="payment-info">
                    <div class="payment-amount">{{ payment.amount | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="payment-date">{{ payment.payment_date || 'No date' }}</div>
                  </div>
                  <div class="payment-actions">
                    <button 
                      pButton 
                      icon="pi pi-pencil" 
                      [text]="true"
                      severity="info"
                      size="small"
                      pTooltip="Edit Payment"
                      (click)="editPayment(payment, i)">
                    </button>
                    <button 
                      pButton 
                      icon="pi pi-trash" 
                      [text]="true"
                      severity="danger"
                      size="small"
                      pTooltip="Delete Payment"
                      (click)="deletePayment(payment, i)">
                    </button>
                  </div>
                </div>
                <div class="payment-description" *ngIf="payment.description">
                  {{ payment.description }}
                </div>
                <div class="payment-attachments" *ngIf="payment.attachments?.length">
                  <div class="attachment-count">
                    <i class="pi pi-paperclip mr-1"></i>
                    {{ payment.attachments?.length || 0 }} attachment(s)
                  </div>
                </div>
              </div>
            </div>

            <!-- No Payments Message -->
            <div class="no-payments" *ngIf="!currentJobPayments?.length && !showAddPaymentForm">
              <p class="text-muted">No payments registered for this job.</p>
            </div>
          </div>
        </p-accordionTab>
      </p-accordion>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <button pButton type="button" severity="secondary" label="Cancel" icon="pi pi-times" (click)="cancelDialog()"></button>
    <button 
      pButton 
      type="button" 
      severity="primary" 
      label="Save" 
      icon="pi pi-check" 
      [disabled]="jobForm.invalid"
      (click)="saveJob($event)">
    </button>
  </ng-template>
</p-dialog>

<!-- JobType Dialog -->
<p-dialog 
  [header]="dialogState.config.title" 
  [(visible)]="dialogState.visible"
  [modal]="dialogState.config.modal"
  [style]="{ width: dialogState.config.width }"
  [closable]="dialogState.config.closable"
  [dismissableMask]="dialogState.config.dismissableMask"
  *ngIf="dialogState.type === 'jobType'">
  
  <form [formGroup]="jobTypeForm" class="dialog-content">
    <!-- Name Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-briefcase"></i>
        </p-inputgroup-addon>
        <p-floatlabel variant="in">
          <input 
            pInputText 
            id="jobTypeName" 
            formControlName="name"
            [class.ng-invalid]="isFieldInvalid(jobTypeForm, 'name')"
          />
          <label for="jobTypeName">Name *</label>
        </p-floatlabel>
      </p-inputgroup>
      <small class="error-message" *ngIf="isFieldInvalid(jobTypeForm, 'name')">
        {{ getFieldError(jobTypeForm, 'name') }}
      </small>
    </div>

    <!-- Description Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-file-edit"></i>
        </p-inputgroup-addon>
        <p-floatlabel variant="in">
          <textarea 
            pTextarea 
            id="jobTypeDescription" 
            formControlName="description"
            rows="3">
          </textarea>
          <label for="jobTypeDescription">Description</label>
        </p-floatlabel>
      </p-inputgroup>
    </div>

    <!-- Base Price and Base Hours Fields -->
    <div class="field-row half-width">
      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-dollar"></i>
          </p-inputgroup-addon>
          <p-floatlabel variant="in">
            <p-inputnumber 
              id="jobTypeBasePrice" 
              formControlName="base_price"
              mode="currency" 
              currency="USD" 
              locale="en-US"
              [min]="0"
              [class.ng-invalid]="isFieldInvalid(jobTypeForm, 'base_price')">
            </p-inputnumber>
            <label for="jobTypeBasePrice">Base Price *</label>
          </p-floatlabel>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(jobTypeForm, 'base_price')">
          {{ getFieldError(jobTypeForm, 'base_price') }}
        </small>
      </div>

      <div class="field-wrapper">
        <p-inputgroup>
          <p-inputgroup-addon>
            <i class="pi pi-clock"></i>
          </p-inputgroup-addon>
          <p-floatlabel variant="in">
            <p-inputnumber 
              id="jobTypeBaseHours" 
              formControlName="base_hours"
              [min]="0.1" 
              [step]="0.5"
              [class.ng-invalid]="isFieldInvalid(jobTypeForm, 'base_hours')">
            </p-inputnumber>
            <label for="jobTypeBaseHours">Base Hours *</label>
          </p-floatlabel>
        </p-inputgroup>
        <small class="error-message" *ngIf="isFieldInvalid(jobTypeForm, 'base_hours')">
          {{ getFieldError(jobTypeForm, 'base_hours') }}
        </small>
      </div>
    </div>

    <!-- Color Field -->
    <div class="field-row full-width">
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-palette"></i>
        </p-inputgroup-addon>
        <p-floatlabel variant="in">
          <p-colorpicker 
            id="jobTypeColor" 
            formControlName="color_hex"
            format="hex">
          </p-colorpicker>
          <label for="jobTypeColor">Color *</label>
        </p-floatlabel>
      </p-inputgroup>
      <small class="error-message" *ngIf="isFieldInvalid(jobTypeForm, 'color_hex')">
        {{ getFieldError(jobTypeForm, 'color_hex') }}
      </small>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <button pButton type="button" severity="secondary" label="Cancel" icon="pi pi-times" (click)="cancelDialog()"></button>
    <button 
      pButton 
      type="button" 
      severity="primary" 
      label="Save" 
      icon="pi pi-check" 
      [disabled]="jobTypeForm.invalid"
      (click)="saveJobType($event)">
    </button>
  </ng-template>
</p-dialog>

<!-- Pomodoro Dialog -->
<p-dialog 
  [header]="dialogState.config.title" 
  [(visible)]="dialogState.visible"
  [modal]="dialogState.config.modal"
  [style]="{ width: dialogState.config.width }"
  [closable]="dialogState.config.closable"
  [dismissableMask]="dialogState.config.dismissableMask"
  *ngIf="dialogState.type === 'pomodoro'"
  styleClass="pomodoro-dialog">
  
  <div class="pomodoro-container">
    <!-- Timer Display -->
    <div class="timer-section">
      <div class="session-info">
        <h3>{{ getSessionTypeLabel(currentSession.type) }}</h3>
        <p class="round-info">Round {{ currentSession.currentRound }} • {{ currentSession.completedPomodoros }} completed</p>
      </div>
      
      <div class="timer-display">
        <div class="timer-circle">
          <svg viewBox="0 0 100 100" class="progress-ring">
            <circle 
              cx="50" 
              cy="50" 
              r="45" 
              fill="none" 
              stroke="var(--p-surface-200)" 
              stroke-width="8"/>
            <circle 
              cx="50" 
              cy="50" 
              r="45" 
              fill="none" 
              [attr.stroke]="getProgressColor()" 
              stroke-width="8"
              stroke-linecap="round"
              [style.stroke-dasharray]="circumference"
              [style.stroke-dashoffset]="strokeDashoffset"
              transform="rotate(-90 50 50)"/>
          </svg>
          <div class="timer-text">
            <span class="time">{{ formatTime(currentSession.remaining) }}</span>
            <span class="session-type">{{ currentSession.type === 'work' ? 'FOCUS' : 'BREAK' }}</span>
          </div>
        </div>
      </div>
      
      <!-- Timer Controls -->
      <div class="timer-controls">
        <button 
          pButton 
          type="button" 
          [icon]="currentSession.isRunning ? 'pi pi-pause' : 'pi pi-play'"
          [label]="currentSession.isRunning ? 'Pause' : (currentSession.isPaused ? 'Resume' : 'Start')"
          severity="primary"
          class="control-btn"
          (click)="toggleTimer()">
        </button>
        
        <button 
          pButton 
          type="button" 
          icon="pi pi-refresh" 
          label="Reset"
          severity="secondary"
          class="control-btn"
          (click)="resetTimer()">
        </button>
        
        <button 
          pButton 
          type="button" 
          icon="pi pi-step-forward" 
          label="Skip"
          severity="info"
          class="control-btn"
          (click)="skipSession()">
        </button>
      </div>
    </div>
    
    <!-- Settings Section -->
    <div class="settings-section">
      <p-accordion>
        <p-accordionTab header="Timer Settings" [selected]="false">
          <form [formGroup]="pomodoroConfigForm" class="config-form">
            <!-- Duration Settings -->
            <div class="config-group">
              <h4>Duration Settings (minutes)</h4>
              <div class="duration-controls">
                <div class="duration-field">
                  <label for="workDuration">Work Session</label>
                  <p-inputnumber
                    inputId="workDuration"
                    formControlName="workDuration"
                    [min]="1"
                    [max]="60"
                    [step]="1">
                  </p-inputnumber>
                </div>
                
                <div class="duration-field">
                  <label for="shortBreakDuration">Short Break</label>
                  <p-inputnumber
                    inputId="shortBreakDuration"
                    formControlName="shortBreakDuration"
                    [min]="1"
                    [max]="30"
                    [step]="1">
                  </p-inputnumber>
                </div>
                
                <div class="duration-field">
                  <label for="longBreakDuration">Long Break</label>
                  <p-inputnumber
                    inputId="longBreakDuration"
                    formControlName="longBreakDuration"
                    [min]="1"
                    [max]="60"
                    [step]="1">
                  </p-inputnumber>
                </div>
                
                <div class="duration-field">
                  <label for="longBreakInterval">Long Break Every</label>
                  <p-inputnumber
                    inputId="longBreakInterval"
                    formControlName="longBreakInterval"
                    [min]="2"
                    [max]="10"
                    [step]="1"
                    suffix=" pomodoros">
                  </p-inputnumber>
                </div>
              </div>
            </div>
            
            <!-- Auto-start Settings -->
            <div class="config-group">
              <h4>Auto-start Settings</h4>
              <div class="checkbox-controls">
                <div class="checkbox-field">
                  <p-checkbox
                    inputId="autoStartBreaks"
                    formControlName="autoStartBreaks"
                    [binary]="true">
                  </p-checkbox>
                  <label for="autoStartBreaks">Auto-start breaks</label>
                </div>
                
                <div class="checkbox-field">
                  <p-checkbox
                    inputId="autoStartPomodoros"
                    formControlName="autoStartPomodoros"
                    [binary]="true">
                  </p-checkbox>
                  <label for="autoStartPomodoros">Auto-start work sessions</label>
                </div>
              </div>
            </div>
            
            <!-- Notification Settings -->
            <div class="config-group">
              <h4>Notification Settings</h4>
              <div class="checkbox-controls">
                <div class="checkbox-field">
                  <p-checkbox
                    inputId="soundEnabled"
                    formControlName="soundEnabled"
                    [binary]="true">
                  </p-checkbox>
                  <label for="soundEnabled">Enable sound notifications</label>
                </div>
                
                <div class="checkbox-field">
                  <p-checkbox
                    inputId="notificationsEnabled"
                    formControlName="notificationsEnabled"
                    [binary]="true">
                  </p-checkbox>
                  <label for="notificationsEnabled">Enable desktop notifications</label>
                </div>
                
                <div class="checkbox-field">
                  <p-checkbox
                    inputId="napalm"
                    formControlName="napalm"
                    [binary]="true">
                  </p-checkbox>
                  <label for="napalm">Napalm - Custom alert sound</label>
                </div>
              </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="config-actions">
              <button 
                pButton 
                type="button" 
                label="Apply Settings" 
                icon="pi pi-check"
                severity="primary"
                (click)="applySettings()">
              </button>
              
              <button 
                pButton 
                type="button" 
                label="Reset Timer" 
                icon="pi pi-refresh"
                severity="secondary"
                (click)="resetPomodoro()">
              </button>
              
              <button 
                pButton 
                type="button" 
                label="Reset All Settings" 
                icon="pi pi-undo"
                severity="danger"
                (click)="resetPomodoroConfig()">
              </button>
            </div>
          </form>
        </p-accordionTab>
      </p-accordion>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <button pButton type="button" severity="secondary" label="Close" icon="pi pi-times" (click)="cancelDialog()"></button>
  </ng-template>
</p-dialog>

<!-- Global Toast and Confirmation -->
<p-confirmdialog />
<p-toast />

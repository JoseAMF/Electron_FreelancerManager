<div class="dashboard-container dark-theme">
  <!-- Header -->
  <p-card class="calendar-header">
    <div class="header-content">
      <div class="header-left">
        <h2>Freela Manager</h2>
        <p>Manage your jobs and deadlines</p>
      </div>
      <div class="header-actions">
        <p-button 
          icon="pi pi-plus" 
          label="New Job"
          (onClick)="onCreateNewJob()"
          class="mr-2">
        </p-button>
      </div>
    </div>
  </p-card>

  <div class="row">
    <!-- Calendar Column -->
    <div class="col-md-6 col-sm-12">
      <app-job-calendar
        [jobs]="jobs"
        [loading]="loading"
        (eventClicked)="onEventClicked($event)"
        (newJobRequested)="onCreateNewJob()"
        (viewChanged)="onCalendarViewChanged($event)"
        (dateChanged)="onCalendarDateChanged($event)">
      </app-job-calendar>
    </div>

    <!-- Jobs Summary Column -->
    <div class="col-md-6 col-sm-12">
      <!-- Current View Info -->
      <p-card title="Current View Summary" class="view-summary-card mb-3">
        <div class="view-info">
          <h4>{{ currentViewLabel }}</h4>
          <p>Total jobs in view: {{ totalJobsInView }}</p>
        </div>
        <div class="status-summary">
          <div class="status-item">
            <p-tag value="Pending" severity="warning"></p-tag>
            <span class="count">{{ pendingJobsCount }}</span>
          </div>
          <div class="status-item">
            <p-tag value="In Progress" severity="info"></p-tag>
            <span class="count">{{ ongoingJobsCount }}</span>
          </div>
          <div class="status-item">
            <p-tag value="Completed" severity="success"></p-tag>
            <span class="count">{{ completedJobsCount }}</span>
          </div>
        </div>
      </p-card>

      <!-- Ongoing Jobs in Current View -->
      <p-card title="Ongoing Jobs in Current View" class="ongoing-jobs-card">
        <ng-container *ngIf="ongoingJobs.length; else noOngoingJobs">
          <ul class="ongoing-jobs-list">
            <li *ngFor="let job of ongoingJobs" class="job-item">
              <div class="job-title">{{ job.title }}</div>
              <div class="job-client">{{ getClientName(job.client?.id) }}</div>
              <div class="job-due-date" *ngIf="job.due_date">
                Due: {{ job.due_date }}
              </div>
              <div class="job-status">
                <p-tag 
                  [value]="job.status" 
                  [severity]="getStatusSeverity(job.status)">
                </p-tag>
              </div>
            </li>
          </ul>
        </ng-container>
        <ng-template #noOngoingJobs>
          <p class="no-jobs-message">No ongoing jobs in the current view period.</p>
        </ng-template>
      </p-card>

      <!-- Pending Jobs in Current View -->
      <p-card title="Pending Jobs in Current View" class="pending-jobs-card mt-3" *ngIf="pendingJobsCount > 0">
        <ul class="pending-jobs-list">
          <li *ngFor="let job of pendingJobs" class="job-item">
            <div class="job-title">{{ job.title }}</div>
            <div class="job-client">{{ getClientName(job.client?.id) }}</div>
            <div class="job-due-date" *ngIf="job.due_date">
              Due: {{ job.due_date }}
            </div>
            <div class="job-status">
              <p-tag 
                [value]="job.status" 
                [severity]="getStatusSeverity(job.status)">
              </p-tag>
            </div>
          </li>
        </ul>
      </p-card>
    </div>
  </div>
</div>